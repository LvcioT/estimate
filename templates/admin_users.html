<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin - Users</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <h1>Users</h1>
    <a href="/">Back</a>
  </header>
  <main>
    <section>
      <h2>Create user</h2>
      <form method="POST" action="/admin/users/create">
        <label>Username <input name="username" /></label>
        <label>Password <input name="password" type="password" /></label>
        <label>Role
          <select name="role">
            <option value="voter">Voter</option>
            <option value="observer">Observer</option>
            <option value="admin">Admin</option>
          </select>
        </label>
        <button type="submit">Create</button>
      </form>
    </section>

    <section>
      <h2>Existing users</h2>
      <table>
        <tr><th>ID</th><th>Username</th><th>Role</th><th>Actions</th></tr>
        {{range .Users}}
        <tr>
          <td>{{.ID}}</td>
          <td>{{.Username}}</td>
          <td>
            <form method="POST" action="/admin/users/role" style="display:inline">
              <input type="hidden" name="id" value="{{.ID}}" />
              <select name="role">
                <option value="voter" {{if eq .Role "voter"}}selected{{end}}>Voter</option>
                <option value="observer" {{if eq .Role "observer"}}selected{{end}}>Observer</option>
                <option value="admin" {{if eq .Role "admin"}}selected{{end}}>Admin</option>
              </select>
              <button type="submit">Change</button>
            </form>
          </td>
          <td>
            <form method="POST" action="/admin/users/delete" onsubmit="return confirm('Delete user?')">
              <input type="hidden" name="id" value="{{.ID}}" />
              <button type="submit">Delete</button>
            </form>
          </td>
        </tr>
        {{end}}
      </table>
    </section>
  </main>
</body>
</html>
